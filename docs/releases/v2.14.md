# Release Notes - All-in-One Performance & Web Search Toggle Unification

## Version: v2.14.8
**Release Date:** 2026-02-16
**Base:** v2.14.6
**Highlights:** Reduced typing lag in All-in-One mode and unified the Provider Web Search toggle behavior/labels across OpenAI, Claude, and Gemini.

---

## All-in-One Input Performance

- Isolated All-in-One input rendering to reduce typing lag and improve responsiveness.

---

## Provider Web Search Toggle (OpenAI / Claude / Gemini)

- Unified the Provider Web Search toggle across OpenAI / Claude / Gemini with clearer, consistent labels.
- Migrated the underlying setting to `providerWebSearch` (existing configs are mapped to the new key).

---

# Release Notes - Attachment Popup & Storage Migration

## Version: v2.14.6
**Release Date:** 2026-02-11
**Base:** v2.14.5
**Highlights:** Refined the chat input with a new attachment popup menu and implemented a robust V2 storage migration system for improved performance.

---

## UI/UX Improvements

- **Unified Attachment Button**: Replaced separate attachment icons with a unified button that supports Text/Audio/Image attachments.
  - **Direct Access**: Clicking the button opens the system file picker, where you can select any supported file type at once.
  - **Enhanced Tooltips**: A detailed tooltip (on hover) explains the specific formats supported for each file category.
- **Persistent Input State**: In All-in-One mode, your text input and attachments are now preserved even when you switch between different layouts.

## System & Performance

- **Storage Migration V2**: Implemented a major upgrade to the chat history storage system.
  - **Migration Service**: Automatically migrates legacy session data to a new, more efficient V2 format.
  - **Progress Tracking**: Added a visual progress indicator on the History page to inform users during the migration process.
  - **Data Integrity**: Includes verification steps to ensure no data is lost during the transition.
  - *Note: This lays the groundwork for better performance and scalability of the history feature (up to 16x faster loading).*

## Audio & File Handling

- **Smart Audio Detection**: Improved detection of audio files using both MIME types and file extensions, ensuring better compatibility with various audio formats (WAV, MP3, AIFF, AAC, OGG, FLAC, M4A).
- **Error Handling**: Added clearer error messages and warnings for unsupported file types or uncommon formats.

---

# Release Notes - History Page Refactor

## Version: v2.14.5
**Release Date:** 2026-02-09
**Base:** v2.14.4
**Highlights:** Major refactor of the History Page for better performance and usability.

---

## History Page Enhancements

- **Performance Boost**: Refactored the session list rendering logic to handle large chat histories smoothly without lag.
- **Improved List View**: 
  - Each session now displays icons for all participating bots, making it easier to identify the conversation type at a glance.
  - Added the first few lines of the AI response to the preview for better context.
- **Restore Session**: A dedicated "Restore Session" button has been added, allowing users to quickly resume past conversations.
- **Increased Limits**: Session history storage limit has been significantly increased to **800 entries** (previously 30/20), allowing for much longer retention of your chat logs.

---

# Release Notes - Export Fixes & UI Tweaks

## Version: v2.14.4
**Release Date:** 2026-02-05
**Base:** v2.14.1
**Highlights:** Fixed critical bugs in the export feature and improved UI responsiveness.

---

## Fixes & Improvements

- **Export Feature Fix**: Resolved an issue where exporting chat history or settings would sometimes fail or produce incomplete files.
- **Auto-Scroll Optimization**: Smoother auto-scrolling behavior during long AI responses, ensuring the view stays focused on the latest content without jumping.
- **Company Profile**: Fixed a bug where company profile settings were not being automatically imported correctly in certain enterprise environments.

---

# Release Notes - Fix Replicate & Gemini Tool Issues

## Version: v2.14.1
**Release Date:** 2025-12-22
**Base:** v2.14.0
**Highlights:** Fixed Seedream URL construction on Replicate and improved tool schema compatibility for Gemini and GPT-5 style providers.

---

## Bug Fixes

- **Replicate Seedream Fix**: Fixed an issue where the Novita-specific URL path was incorrectly applied to Replicate Seedream models, causing 404 errors. Added a generic fallback for Replicate models to prevent future issues.
- **Gemini Tool Schema**: Implemented `sanitizeSchema` to remove non-standard fields like `x-order` and `title` from tool definitions, which were causing `400 Bad Request` errors in Gemini API.
- **OpenAI Tool Format**: Updated tool conversion to support a hybrid format (name at top level) to improve compatibility with certain OpenAI-compatible providers (like GPT-5 preview endpoints).

---

# Release Notes - Audio Support & Speech-to-Text

## Version: v2.14.0
**Release Date:** 2025-12-17
**Base:** v2.13.9
**Highlights:** Added comprehensive Audio File Support. Gemini models now support native audio input, while other models gain audio compatibility via a built-in Speech-to-Text (SST) transcription feature.

---

## Audio File Support

### 1. Native Audio Input (Gemini)
- **Direct Processing**: You can now upload audio files directly to **Gemini 1.5 Pro / Flash** models.
- **Multimodal Understanding**: Gemini can listen to the audio and answer questions, summarize content, or analyze tone directly from the raw audio data.
- **Supported Formats**: WAV, MP3, AIFF, AAC, OGG, FLAC.

### 2. Universal Audio Support via SST (Speech-to-Text)
- **For Non-Audio Models**: Models that don't support audio natively (like **Claude 3.5 Sonnet**, **GPT-4o**, or Local LLMs) can now "hear" your audio files.
- **Transcribe Modal**: When you upload an audio file to these bots, a "Transcribe" dialog appears.
- **Transcription Engines**:
  - **OpenAI Whisper**: High-accuracy transcription (requires OpenAI API key).
  - **Gemini**: Cost-effective transcription using your existing Gemini bots.
- **Workflow**: The audio is transcribed to text, and the text is sent to the bot as context, allowing you to "chat" about the audio with any model.

### 3. Audio Player & UI
- **Inline Player**: Uploaded audio files are displayed with a sleek inline audio player in the chat history.
- **File Preview**: Click on an audio attachment to preview it and see its transcription (if available).

---

## Improvements

- **Input Handling**: Drag-and-drop support for audio files in the chat input area.
- **SST Service**: New internal service `sst-service` to handle transcription logic abstractly across providers.
- **Attachment Preview**: Enhanced preview modal to support audio playback alongside text content.

---

## Technical Details

- **New Permissions**: No new host permissions required (uses existing OpenAI/Gemini access).
- **Files**: Added `src/services/sst-service.ts`, `src/app/components/Chat/TranscribeModal.tsx`.
- **Refactoring**: Updated `file-processor.ts` to handle audio MIME types and validation logic.

---

## Summary

v2.14.0 bridges the gap between multimodal and text-only models, ensuring that **Audio** is a first-class citizen in HuddleLLM regardless of which AI provider you prefer.
